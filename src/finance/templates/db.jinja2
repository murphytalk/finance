{% extends "datatable.jinja2" %}
{% block content %}
<div class="row">
    <div class="col-md-12 top5 bottom5">
        <div class="btn-group">
            <button type="button" class="btn btn-primary" id="q">quote</button>
            <button type="button" class="btn btn-primary" id="t">transaction</button>
            <button type="button" class="btn btn-primary" id="x">xccy</button>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <table id="dbtable" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0">
            <thead></thead>
        </table>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    $("#q").click(function () {
        build_header('#dbtable',['Date', 'Symbol', 'Price']);
        populate_data(
                '#dbtable',
                "{{url_for('finance_page.db_quote_json')}}",
                [[0, 'desc'],
                [1, 'desc']],
                100,
                [50,100,200],
                [
                    {
                        "render": function (data,type,row){
                            return data.toLocaleString();
                        },"targets": 2
                    }
                ],
                null);
    });
    $("#t").click(function () {
        build_header('#dbtable',['Date', 'Symbol', 'Type', 'Price','Shares','Fee']);
        populate_data(
                '#dbtable',
                "{{url_for('finance_page.db_trans_json')}}",
                [[0, 'desc'],
                [1, 'desc']],
                100,
                [50,100,200],
                [
                    {
                        "render": function (data,type,row){
                            if(data==null)
                                return '';
                            else
                                return data.toLocaleString();
                        },"targets": [3,5]
                    }
                ],
                null);
    });
    $("#x").click(function () {
        build_header('#dbtable',['Date', 'From', 'To','Rate']);
        populate_data(
                '#dbtable',
                "{{url_for('finance_page.db_xccy_json')}}",
                [[0, 'desc'],
                [1, 'desc']],
                100,
                [50,100,200],
                [
                    {
                        "render": function (data,type,row){
                            return data.toLocaleString();
                        },"targets": 3
                    }
                ],
                null);
    });
</script>
{% endblock %}
